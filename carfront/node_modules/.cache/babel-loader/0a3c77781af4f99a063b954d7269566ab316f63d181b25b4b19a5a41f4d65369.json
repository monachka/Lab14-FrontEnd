{"ast":null,"code":"import _toConsumableArray from \"/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { defaultMemoize } from 'reselect';\nimport { unstable_useEnhancedEffect as useEnhancedEffect } from '@mui/utils';\nimport { useLazyRef } from '../../utils/useLazyRef';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridFilterableColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { GridPreferencePanelsValue } from '../preferencesPanel/gridPreferencePanelsValue';\nimport { getDefaultGridFilterModel } from './gridFilterState';\nimport { gridFilterModelSelector } from './gridFilterSelector';\nimport { useFirstRender } from '../../utils/useFirstRender';\nimport { gridRowsLookupSelector } from '../rows';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GRID_DEFAULT_STRATEGY, useGridRegisterStrategyProcessor } from '../../core/strategyProcessing';\nimport { buildAggregatedFilterApplier, sanitizeFilterModel, mergeStateWithFilterModel, cleanFilterItem, passFilterLogic } from './gridFilterUtils';\nimport { isDeepEqual } from '../../../utils/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var filterStateInitializer = function filterStateInitializer(state, props, apiRef) {\n  var _ref, _props$filterModel, _props$initialState;\n  var filterModel = (_ref = (_props$filterModel = props.filterModel) != null ? _props$filterModel : (_props$initialState = props.initialState) == null || (_props$initialState = _props$initialState.filter) == null ? void 0 : _props$initialState.filterModel) != null ? _ref : getDefaultGridFilterModel();\n  return _extends({}, state, {\n    filter: {\n      filterModel: sanitizeFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef),\n      filteredRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    },\n    visibleRowsLookup: {}\n  });\n};\nvar getVisibleRowsLookup = function getVisibleRowsLookup(params) {\n  // For flat tree, the `visibleRowsLookup` and the `filteredRowsLookup` are equals since no row is collapsed.\n  return params.filteredRowsLookup;\n};\nfunction getVisibleRowsLookupState(apiRef, state) {\n  return apiRef.current.applyStrategyProcessor('visibleRowsLookupCreation', {\n    tree: state.rows.tree,\n    filteredRowsLookup: state.filter.filteredRowsLookup\n  });\n}\nfunction createMemoizedValues() {\n  return defaultMemoize(Object.values);\n}\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n * @requires useGridRows (event)\n */\nexport var useGridFilter = function useGridFilter(apiRef, props) {\n  var _props$initialState3, _props$slotProps2;\n  var logger = useGridLogger(apiRef, 'useGridFilter');\n  apiRef.current.registerControlState({\n    stateId: 'filter',\n    propModel: props.filterModel,\n    propOnChange: props.onFilterModelChange,\n    stateSelector: gridFilterModelSelector,\n    changeEvent: 'filterModelChange'\n  });\n  var updateFilteredRows = React.useCallback(function () {\n    apiRef.current.setState(function (state) {\n      var filterModel = gridFilterModelSelector(state, apiRef.current.instanceId);\n      var isRowMatchingFilters = props.filterMode === 'client' ? buildAggregatedFilterApplier(props.getRowId, filterModel, apiRef, props.disableEval) : null;\n      var filteringResult = apiRef.current.applyStrategyProcessor('filtering', {\n        isRowMatchingFilters: isRowMatchingFilters,\n        filterModel: filterModel != null ? filterModel : getDefaultGridFilterModel()\n      });\n      var newState = _extends({}, state, {\n        filter: _extends({}, state.filter, filteringResult)\n      });\n      var visibleRowsLookupState = getVisibleRowsLookupState(apiRef, newState);\n      return _extends({}, newState, {\n        visibleRowsLookup: visibleRowsLookupState\n      });\n    });\n    apiRef.current.publishEvent('filteredRowsSet');\n  }, [apiRef, props.filterMode, props.getRowId, props.disableEval]);\n  var addColumnMenuItem = React.useCallback(function (columnMenuItems, colDef) {\n    if (colDef == null || colDef.filterable === false || props.disableColumnFilter) {\n      return columnMenuItems;\n    }\n    return [].concat(_toConsumableArray(columnMenuItems), ['columnMenuFilterItem']);\n  }, [props.disableColumnFilter]);\n\n  /**\n   * API METHODS\n   */\n  var applyFilters = React.useCallback(function () {\n    updateFilteredRows();\n    apiRef.current.forceUpdate();\n  }, [apiRef, updateFilteredRows]);\n  var upsertFilterItem = React.useCallback(function (item) {\n    var filterModel = gridFilterModelSelector(apiRef);\n    var items = _toConsumableArray(filterModel.items);\n    var itemIndex = items.findIndex(function (filterItem) {\n      return filterItem.id === item.id;\n    });\n    if (itemIndex === -1) {\n      items.push(item);\n    } else {\n      items[itemIndex] = item;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items: items\n    }), 'upsertFilterItem');\n  }, [apiRef]);\n  var upsertFilterItems = React.useCallback(function (items) {\n    var filterModel = gridFilterModelSelector(apiRef);\n    var existingItems = _toConsumableArray(filterModel.items);\n    items.forEach(function (item) {\n      var itemIndex = items.findIndex(function (filterItem) {\n        return filterItem.id === item.id;\n      });\n      if (itemIndex === -1) {\n        existingItems.push(item);\n      } else {\n        existingItems[itemIndex] = item;\n      }\n    });\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items: items\n    }), 'upsertFilterItems');\n  }, [apiRef]);\n  var deleteFilterItem = React.useCallback(function (itemToDelete) {\n    var filterModel = gridFilterModelSelector(apiRef);\n    var items = filterModel.items.filter(function (item) {\n      return item.id !== itemToDelete.id;\n    });\n    if (items.length === filterModel.items.length) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items: items\n    }), 'deleteFilterItem');\n  }, [apiRef]);\n  var showFilterPanel = React.useCallback(function (targetColumnField, panelId, labelId) {\n    logger.debug('Displaying filter panel');\n    if (targetColumnField) {\n      var filterModel = gridFilterModelSelector(apiRef);\n      var filterItemsWithValue = filterModel.items.filter(function (item) {\n        var _column$filterOperato;\n        if (item.value !== undefined) {\n          // Some filters like `isAnyOf` support array as `item.value`.\n          // If array is empty, we want to remove it from the filter model.\n          if (Array.isArray(item.value) && item.value.length === 0) {\n            return false;\n          }\n          return true;\n        }\n        var column = apiRef.current.getColumn(item.field);\n        var filterOperator = (_column$filterOperato = column.filterOperators) == null ? void 0 : _column$filterOperato.find(function (operator) {\n          return operator.value === item.operator;\n        });\n        var requiresFilterValue = typeof (filterOperator == null ? void 0 : filterOperator.requiresFilterValue) === 'undefined' ? true : filterOperator == null ? void 0 : filterOperator.requiresFilterValue;\n\n        // Operators like `isEmpty` don't have and don't require `item.value`.\n        // So we don't want to remove them from the filter model if `item.value === undefined`.\n        // See https://github.com/mui/mui-x/issues/5402\n        if (requiresFilterValue) {\n          return false;\n        }\n        return true;\n      });\n      var newFilterItems;\n      var filterItemOnTarget = filterItemsWithValue.find(function (item) {\n        return item.field === targetColumnField;\n      });\n      var targetColumn = apiRef.current.getColumn(targetColumnField);\n      if (filterItemOnTarget) {\n        newFilterItems = filterItemsWithValue;\n      } else if (props.disableMultipleColumnsFiltering) {\n        newFilterItems = [cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      } else {\n        newFilterItems = [].concat(_toConsumableArray(filterItemsWithValue), [cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)]);\n      }\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n    apiRef.current.showPreferences(GridPreferencePanelsValue.filters, panelId, labelId);\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  var hideFilterPanel = React.useCallback(function () {\n    logger.debug('Hiding filter panel');\n    apiRef.current.hidePreferences();\n  }, [apiRef, logger]);\n  var setFilterLogicOperator = React.useCallback(function (logicOperator) {\n    var filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.logicOperator === logicOperator) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      logicOperator: logicOperator\n    }), 'changeLogicOperator');\n  }, [apiRef]);\n  var setQuickFilterValues = React.useCallback(function (values) {\n    var filterModel = gridFilterModelSelector(apiRef);\n    if (isDeepEqual(filterModel.quickFilterValues, values)) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      quickFilterValues: _toConsumableArray(values)\n    }));\n  }, [apiRef]);\n  var setFilterModel = React.useCallback(function (model, reason) {\n    var currentModel = gridFilterModelSelector(apiRef);\n    if (currentModel !== model) {\n      logger.debug('Setting filter model');\n      apiRef.current.updateControlState('filter', mergeStateWithFilterModel(model, props.disableMultipleColumnsFiltering, apiRef), reason);\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  var filterApi = {\n    setFilterLogicOperator: setFilterLogicOperator,\n    unstable_applyFilters: applyFilters,\n    deleteFilterItem: deleteFilterItem,\n    upsertFilterItem: upsertFilterItem,\n    upsertFilterItems: upsertFilterItems,\n    setFilterModel: setFilterModel,\n    showFilterPanel: showFilterPanel,\n    hideFilterPanel: hideFilterPanel,\n    setQuickFilterValues: setQuickFilterValues\n  };\n  useGridApiMethod(apiRef, filterApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  var stateExportPreProcessing = React.useCallback(function (prevState, context) {\n    var _props$initialState2;\n    var filterModelToExport = gridFilterModelSelector(apiRef);\n    var shouldExportFilterModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.filterModel != null ||\n    // Always export if the model has been initialized\n    ((_props$initialState2 = props.initialState) == null || (_props$initialState2 = _props$initialState2.filter) == null ? void 0 : _props$initialState2.filterModel) != null ||\n    // Export if the model is not equal to the default value\n    !isDeepEqual(filterModelToExport, getDefaultGridFilterModel());\n    if (!shouldExportFilterModel) {\n      return prevState;\n    }\n    return _extends({}, prevState, {\n      filter: {\n        filterModel: filterModelToExport\n      }\n    });\n  }, [apiRef, props.filterModel, (_props$initialState3 = props.initialState) == null || (_props$initialState3 = _props$initialState3.filter) == null ? void 0 : _props$initialState3.filterModel]);\n  var stateRestorePreProcessing = React.useCallback(function (params, context) {\n    var _context$stateToResto;\n    var filterModel = (_context$stateToResto = context.stateToRestore.filter) == null ? void 0 : _context$stateToResto.filterModel;\n    if (filterModel == null) {\n      return params;\n    }\n    apiRef.current.updateControlState('filter', mergeStateWithFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef), 'restoreState');\n    return _extends({}, params, {\n      callbacks: [].concat(_toConsumableArray(params.callbacks), [apiRef.current.unstable_applyFilters])\n    });\n  }, [apiRef, props.disableMultipleColumnsFiltering]);\n  var preferencePanelPreProcessing = React.useCallback(function (initialValue, value) {\n    if (value === GridPreferencePanelsValue.filters) {\n      var _props$slotProps;\n      var FilterPanel = props.slots.filterPanel;\n      return /*#__PURE__*/_jsx(FilterPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.filterPanel));\n    }\n    return initialValue;\n  }, [props.slots.filterPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.filterPanel]);\n  var getRowId = props.getRowId;\n  var getRowsRef = useLazyRef(createMemoizedValues);\n  var flatFilteringMethod = React.useCallback(function (params) {\n    if (props.filterMode !== 'client' || !params.isRowMatchingFilters) {\n      return {\n        filteredRowsLookup: {},\n        filteredDescendantCountLookup: {}\n      };\n    }\n    var dataRowIdToModelLookup = gridRowsLookupSelector(apiRef);\n    var filteredRowsLookup = {};\n    var isRowMatchingFilters = params.isRowMatchingFilters;\n    var filterCache = {};\n    var result = {\n      passingFilterItems: null,\n      passingQuickFilterValues: null\n    };\n    var rows = getRowsRef.current(apiRef.current.state.rows.dataRowIdToModelLookup);\n    for (var i = 0; i < rows.length; i += 1) {\n      var row = rows[i];\n      var id = getRowId ? getRowId(row) : row.id;\n      isRowMatchingFilters(row, undefined, result);\n      var isRowPassing = passFilterLogic([result.passingFilterItems], [result.passingQuickFilterValues], params.filterModel, apiRef, filterCache);\n      filteredRowsLookup[id] = isRowPassing;\n    }\n    var footerId = 'auto-generated-group-footer-root';\n    var footer = dataRowIdToModelLookup[footerId];\n    if (footer) {\n      filteredRowsLookup[footerId] = true;\n    }\n    return {\n      filteredRowsLookup: filteredRowsLookup,\n      filteredDescendantCountLookup: {}\n    };\n  }, [apiRef, props.filterMode, getRowId, getRowsRef]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItem);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'filtering', flatFilteringMethod);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'visibleRowsLookupCreation', getVisibleRowsLookup);\n\n  /**\n   * EVENTS\n   */\n  var handleColumnsChange = React.useCallback(function () {\n    logger.debug('onColUpdated - GridColumns changed, applying filters');\n    var filterModel = gridFilterModelSelector(apiRef);\n    var filterableColumnsLookup = gridFilterableColumnLookupSelector(apiRef);\n    var newFilterItems = filterModel.items.filter(function (item) {\n      return item.field && filterableColumnsLookup[item.field];\n    });\n    if (newFilterItems.length < filterModel.items.length) {\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n  }, [apiRef, logger]);\n  var handleStrategyProcessorChange = React.useCallback(function (methodName) {\n    if (methodName === 'filtering') {\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef]);\n  var updateVisibleRowsLookupState = React.useCallback(function () {\n    apiRef.current.setState(function (state) {\n      return _extends({}, state, {\n        visibleRowsLookup: getVisibleRowsLookupState(apiRef, state)\n      });\n    });\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n\n  // Do not call `apiRef.current.forceUpdate` to avoid re-render before updating the sorted rows.\n  // Otherwise, the state is not consistent during the render\n  useGridApiEventHandler(apiRef, 'rowsSet', updateFilteredRows);\n  useGridApiEventHandler(apiRef, 'columnsChange', handleColumnsChange);\n  useGridApiEventHandler(apiRef, 'activeStrategyProcessorChange', handleStrategyProcessorChange);\n  useGridApiEventHandler(apiRef, 'rowExpansionChange', updateVisibleRowsLookupState);\n  useGridApiEventHandler(apiRef, 'columnVisibilityModelChange', function () {\n    var filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.quickFilterValues && filterModel.quickFilterExcludeHiddenColumns) {\n      // re-apply filters because the quick filter results may have changed\n      apiRef.current.unstable_applyFilters();\n    }\n  });\n\n  /**\n   * 1ST RENDER\n   */\n  useFirstRender(function () {\n    apiRef.current.unstable_applyFilters();\n  });\n\n  /**\n   * EFFECTS\n   */\n  useEnhancedEffect(function () {\n    if (props.filterModel !== undefined) {\n      apiRef.current.setFilterModel(props.filterModel);\n    }\n  }, [apiRef, logger, props.filterModel]);\n};","map":{"version":3,"names":["_extends","React","defaultMemoize","unstable_useEnhancedEffect","useEnhancedEffect","useLazyRef","useGridApiEventHandler","useGridApiMethod","useGridLogger","gridFilterableColumnLookupSelector","GridPreferencePanelsValue","getDefaultGridFilterModel","gridFilterModelSelector","useFirstRender","gridRowsLookupSelector","useGridRegisterPipeProcessor","GRID_DEFAULT_STRATEGY","useGridRegisterStrategyProcessor","buildAggregatedFilterApplier","sanitizeFilterModel","mergeStateWithFilterModel","cleanFilterItem","passFilterLogic","isDeepEqual","jsx","_jsx","filterStateInitializer","state","props","apiRef","_ref","_props$filterModel","_props$initialState","filterModel","initialState","filter","disableMultipleColumnsFiltering","filteredRowsLookup","filteredDescendantCountLookup","visibleRowsLookup","getVisibleRowsLookup","params","getVisibleRowsLookupState","current","applyStrategyProcessor","tree","rows","createMemoizedValues","Object","values","useGridFilter","_props$initialState3","_props$slotProps2","logger","registerControlState","stateId","propModel","propOnChange","onFilterModelChange","stateSelector","changeEvent","updateFilteredRows","useCallback","setState","instanceId","isRowMatchingFilters","filterMode","getRowId","disableEval","filteringResult","newState","visibleRowsLookupState","publishEvent","addColumnMenuItem","columnMenuItems","colDef","filterable","disableColumnFilter","concat","_toConsumableArray","applyFilters","forceUpdate","upsertFilterItem","item","items","itemIndex","findIndex","filterItem","id","push","setFilterModel","upsertFilterItems","existingItems","forEach","deleteFilterItem","itemToDelete","length","showFilterPanel","targetColumnField","panelId","labelId","debug","filterItemsWithValue","_column$filterOperato","value","undefined","Array","isArray","column","getColumn","field","filterOperator","filterOperators","find","operator","requiresFilterValue","newFilterItems","filterItemOnTarget","targetColumn","showPreferences","filters","hideFilterPanel","hidePreferences","setFilterLogicOperator","logicOperator","setQuickFilterValues","quickFilterValues","model","reason","currentModel","updateControlState","unstable_applyFilters","filterApi","stateExportPreProcessing","prevState","context","_props$initialState2","filterModelToExport","shouldExportFilterModel","exportOnlyDirtyModels","stateRestorePreProcessing","_context$stateToResto","stateToRestore","callbacks","preferencePanelPreProcessing","initialValue","_props$slotProps","FilterPanel","slots","filterPanel","slotProps","getRowsRef","flatFilteringMethod","dataRowIdToModelLookup","filterCache","result","passingFilterItems","passingQuickFilterValues","i","row","isRowPassing","footerId","footer","handleColumnsChange","filterableColumnsLookup","handleStrategyProcessorChange","methodName","updateVisibleRowsLookupState","quickFilterExcludeHiddenColumns"],"sources":["/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@mui/x-data-grid/hooks/features/filter/useGridFilter.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { defaultMemoize } from 'reselect';\nimport { unstable_useEnhancedEffect as useEnhancedEffect } from '@mui/utils';\nimport { useLazyRef } from '../../utils/useLazyRef';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridFilterableColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { GridPreferencePanelsValue } from '../preferencesPanel/gridPreferencePanelsValue';\nimport { getDefaultGridFilterModel } from './gridFilterState';\nimport { gridFilterModelSelector } from './gridFilterSelector';\nimport { useFirstRender } from '../../utils/useFirstRender';\nimport { gridRowsLookupSelector } from '../rows';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GRID_DEFAULT_STRATEGY, useGridRegisterStrategyProcessor } from '../../core/strategyProcessing';\nimport { buildAggregatedFilterApplier, sanitizeFilterModel, mergeStateWithFilterModel, cleanFilterItem, passFilterLogic } from './gridFilterUtils';\nimport { isDeepEqual } from '../../../utils/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const filterStateInitializer = (state, props, apiRef) => {\n  var _ref, _props$filterModel, _props$initialState;\n  const filterModel = (_ref = (_props$filterModel = props.filterModel) != null ? _props$filterModel : (_props$initialState = props.initialState) == null || (_props$initialState = _props$initialState.filter) == null ? void 0 : _props$initialState.filterModel) != null ? _ref : getDefaultGridFilterModel();\n  return _extends({}, state, {\n    filter: {\n      filterModel: sanitizeFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef),\n      filteredRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    },\n    visibleRowsLookup: {}\n  });\n};\nconst getVisibleRowsLookup = params => {\n  // For flat tree, the `visibleRowsLookup` and the `filteredRowsLookup` are equals since no row is collapsed.\n  return params.filteredRowsLookup;\n};\nfunction getVisibleRowsLookupState(apiRef, state) {\n  return apiRef.current.applyStrategyProcessor('visibleRowsLookupCreation', {\n    tree: state.rows.tree,\n    filteredRowsLookup: state.filter.filteredRowsLookup\n  });\n}\nfunction createMemoizedValues() {\n  return defaultMemoize(Object.values);\n}\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n * @requires useGridRows (event)\n */\nexport const useGridFilter = (apiRef, props) => {\n  var _props$initialState3, _props$slotProps2;\n  const logger = useGridLogger(apiRef, 'useGridFilter');\n  apiRef.current.registerControlState({\n    stateId: 'filter',\n    propModel: props.filterModel,\n    propOnChange: props.onFilterModelChange,\n    stateSelector: gridFilterModelSelector,\n    changeEvent: 'filterModelChange'\n  });\n  const updateFilteredRows = React.useCallback(() => {\n    apiRef.current.setState(state => {\n      const filterModel = gridFilterModelSelector(state, apiRef.current.instanceId);\n      const isRowMatchingFilters = props.filterMode === 'client' ? buildAggregatedFilterApplier(props.getRowId, filterModel, apiRef, props.disableEval) : null;\n      const filteringResult = apiRef.current.applyStrategyProcessor('filtering', {\n        isRowMatchingFilters,\n        filterModel: filterModel != null ? filterModel : getDefaultGridFilterModel()\n      });\n      const newState = _extends({}, state, {\n        filter: _extends({}, state.filter, filteringResult)\n      });\n      const visibleRowsLookupState = getVisibleRowsLookupState(apiRef, newState);\n      return _extends({}, newState, {\n        visibleRowsLookup: visibleRowsLookupState\n      });\n    });\n    apiRef.current.publishEvent('filteredRowsSet');\n  }, [apiRef, props.filterMode, props.getRowId, props.disableEval]);\n  const addColumnMenuItem = React.useCallback((columnMenuItems, colDef) => {\n    if (colDef == null || colDef.filterable === false || props.disableColumnFilter) {\n      return columnMenuItems;\n    }\n    return [...columnMenuItems, 'columnMenuFilterItem'];\n  }, [props.disableColumnFilter]);\n\n  /**\n   * API METHODS\n   */\n  const applyFilters = React.useCallback(() => {\n    updateFilteredRows();\n    apiRef.current.forceUpdate();\n  }, [apiRef, updateFilteredRows]);\n  const upsertFilterItem = React.useCallback(item => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = [...filterModel.items];\n    const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n    if (itemIndex === -1) {\n      items.push(item);\n    } else {\n      items[itemIndex] = item;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItem');\n  }, [apiRef]);\n  const upsertFilterItems = React.useCallback(items => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const existingItems = [...filterModel.items];\n    items.forEach(item => {\n      const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n      if (itemIndex === -1) {\n        existingItems.push(item);\n      } else {\n        existingItems[itemIndex] = item;\n      }\n    });\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItems');\n  }, [apiRef]);\n  const deleteFilterItem = React.useCallback(itemToDelete => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = filterModel.items.filter(item => item.id !== itemToDelete.id);\n    if (items.length === filterModel.items.length) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'deleteFilterItem');\n  }, [apiRef]);\n  const showFilterPanel = React.useCallback((targetColumnField, panelId, labelId) => {\n    logger.debug('Displaying filter panel');\n    if (targetColumnField) {\n      const filterModel = gridFilterModelSelector(apiRef);\n      const filterItemsWithValue = filterModel.items.filter(item => {\n        var _column$filterOperato;\n        if (item.value !== undefined) {\n          // Some filters like `isAnyOf` support array as `item.value`.\n          // If array is empty, we want to remove it from the filter model.\n          if (Array.isArray(item.value) && item.value.length === 0) {\n            return false;\n          }\n          return true;\n        }\n        const column = apiRef.current.getColumn(item.field);\n        const filterOperator = (_column$filterOperato = column.filterOperators) == null ? void 0 : _column$filterOperato.find(operator => operator.value === item.operator);\n        const requiresFilterValue = typeof (filterOperator == null ? void 0 : filterOperator.requiresFilterValue) === 'undefined' ? true : filterOperator == null ? void 0 : filterOperator.requiresFilterValue;\n\n        // Operators like `isEmpty` don't have and don't require `item.value`.\n        // So we don't want to remove them from the filter model if `item.value === undefined`.\n        // See https://github.com/mui/mui-x/issues/5402\n        if (requiresFilterValue) {\n          return false;\n        }\n        return true;\n      });\n      let newFilterItems;\n      const filterItemOnTarget = filterItemsWithValue.find(item => item.field === targetColumnField);\n      const targetColumn = apiRef.current.getColumn(targetColumnField);\n      if (filterItemOnTarget) {\n        newFilterItems = filterItemsWithValue;\n      } else if (props.disableMultipleColumnsFiltering) {\n        newFilterItems = [cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      } else {\n        newFilterItems = [...filterItemsWithValue, cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      }\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n    apiRef.current.showPreferences(GridPreferencePanelsValue.filters, panelId, labelId);\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const hideFilterPanel = React.useCallback(() => {\n    logger.debug('Hiding filter panel');\n    apiRef.current.hidePreferences();\n  }, [apiRef, logger]);\n  const setFilterLogicOperator = React.useCallback(logicOperator => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.logicOperator === logicOperator) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      logicOperator\n    }), 'changeLogicOperator');\n  }, [apiRef]);\n  const setQuickFilterValues = React.useCallback(values => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (isDeepEqual(filterModel.quickFilterValues, values)) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      quickFilterValues: [...values]\n    }));\n  }, [apiRef]);\n  const setFilterModel = React.useCallback((model, reason) => {\n    const currentModel = gridFilterModelSelector(apiRef);\n    if (currentModel !== model) {\n      logger.debug('Setting filter model');\n      apiRef.current.updateControlState('filter', mergeStateWithFilterModel(model, props.disableMultipleColumnsFiltering, apiRef), reason);\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const filterApi = {\n    setFilterLogicOperator,\n    unstable_applyFilters: applyFilters,\n    deleteFilterItem,\n    upsertFilterItem,\n    upsertFilterItems,\n    setFilterModel,\n    showFilterPanel,\n    hideFilterPanel,\n    setQuickFilterValues\n  };\n  useGridApiMethod(apiRef, filterApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2;\n    const filterModelToExport = gridFilterModelSelector(apiRef);\n    const shouldExportFilterModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.filterModel != null ||\n    // Always export if the model has been initialized\n    ((_props$initialState2 = props.initialState) == null || (_props$initialState2 = _props$initialState2.filter) == null ? void 0 : _props$initialState2.filterModel) != null ||\n    // Export if the model is not equal to the default value\n    !isDeepEqual(filterModelToExport, getDefaultGridFilterModel());\n    if (!shouldExportFilterModel) {\n      return prevState;\n    }\n    return _extends({}, prevState, {\n      filter: {\n        filterModel: filterModelToExport\n      }\n    });\n  }, [apiRef, props.filterModel, (_props$initialState3 = props.initialState) == null || (_props$initialState3 = _props$initialState3.filter) == null ? void 0 : _props$initialState3.filterModel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    var _context$stateToResto;\n    const filterModel = (_context$stateToResto = context.stateToRestore.filter) == null ? void 0 : _context$stateToResto.filterModel;\n    if (filterModel == null) {\n      return params;\n    }\n    apiRef.current.updateControlState('filter', mergeStateWithFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef), 'restoreState');\n    return _extends({}, params, {\n      callbacks: [...params.callbacks, apiRef.current.unstable_applyFilters]\n    });\n  }, [apiRef, props.disableMultipleColumnsFiltering]);\n  const preferencePanelPreProcessing = React.useCallback((initialValue, value) => {\n    if (value === GridPreferencePanelsValue.filters) {\n      var _props$slotProps;\n      const FilterPanel = props.slots.filterPanel;\n      return /*#__PURE__*/_jsx(FilterPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.filterPanel));\n    }\n    return initialValue;\n  }, [props.slots.filterPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.filterPanel]);\n  const {\n    getRowId\n  } = props;\n  const getRowsRef = useLazyRef(createMemoizedValues);\n  const flatFilteringMethod = React.useCallback(params => {\n    if (props.filterMode !== 'client' || !params.isRowMatchingFilters) {\n      return {\n        filteredRowsLookup: {},\n        filteredDescendantCountLookup: {}\n      };\n    }\n    const dataRowIdToModelLookup = gridRowsLookupSelector(apiRef);\n    const filteredRowsLookup = {};\n    const {\n      isRowMatchingFilters\n    } = params;\n    const filterCache = {};\n    const result = {\n      passingFilterItems: null,\n      passingQuickFilterValues: null\n    };\n    const rows = getRowsRef.current(apiRef.current.state.rows.dataRowIdToModelLookup);\n    for (let i = 0; i < rows.length; i += 1) {\n      const row = rows[i];\n      const id = getRowId ? getRowId(row) : row.id;\n      isRowMatchingFilters(row, undefined, result);\n      const isRowPassing = passFilterLogic([result.passingFilterItems], [result.passingQuickFilterValues], params.filterModel, apiRef, filterCache);\n      filteredRowsLookup[id] = isRowPassing;\n    }\n    const footerId = 'auto-generated-group-footer-root';\n    const footer = dataRowIdToModelLookup[footerId];\n    if (footer) {\n      filteredRowsLookup[footerId] = true;\n    }\n    return {\n      filteredRowsLookup,\n      filteredDescendantCountLookup: {}\n    };\n  }, [apiRef, props.filterMode, getRowId, getRowsRef]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItem);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'filtering', flatFilteringMethod);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'visibleRowsLookupCreation', getVisibleRowsLookup);\n\n  /**\n   * EVENTS\n   */\n  const handleColumnsChange = React.useCallback(() => {\n    logger.debug('onColUpdated - GridColumns changed, applying filters');\n    const filterModel = gridFilterModelSelector(apiRef);\n    const filterableColumnsLookup = gridFilterableColumnLookupSelector(apiRef);\n    const newFilterItems = filterModel.items.filter(item => item.field && filterableColumnsLookup[item.field]);\n    if (newFilterItems.length < filterModel.items.length) {\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n  }, [apiRef, logger]);\n  const handleStrategyProcessorChange = React.useCallback(methodName => {\n    if (methodName === 'filtering') {\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef]);\n  const updateVisibleRowsLookupState = React.useCallback(() => {\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        visibleRowsLookup: getVisibleRowsLookupState(apiRef, state)\n      });\n    });\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n\n  // Do not call `apiRef.current.forceUpdate` to avoid re-render before updating the sorted rows.\n  // Otherwise, the state is not consistent during the render\n  useGridApiEventHandler(apiRef, 'rowsSet', updateFilteredRows);\n  useGridApiEventHandler(apiRef, 'columnsChange', handleColumnsChange);\n  useGridApiEventHandler(apiRef, 'activeStrategyProcessorChange', handleStrategyProcessorChange);\n  useGridApiEventHandler(apiRef, 'rowExpansionChange', updateVisibleRowsLookupState);\n  useGridApiEventHandler(apiRef, 'columnVisibilityModelChange', () => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.quickFilterValues && filterModel.quickFilterExcludeHiddenColumns) {\n      // re-apply filters because the quick filter results may have changed\n      apiRef.current.unstable_applyFilters();\n    }\n  });\n\n  /**\n   * 1ST RENDER\n   */\n  useFirstRender(() => {\n    apiRef.current.unstable_applyFilters();\n  });\n\n  /**\n   * EFFECTS\n   */\n  useEnhancedEffect(() => {\n    if (props.filterModel !== undefined) {\n      apiRef.current.setFilterModel(props.filterModel);\n    }\n  }, [apiRef, logger, props.filterModel]);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}