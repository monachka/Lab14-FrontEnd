{"ast":null,"code":"import _regeneratorRuntime from \"/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument } from '@mui/utils';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridExpandedRowCountSelector } from '../filter/gridFilterSelector';\nimport { gridColumnDefinitionsSelector, gridColumnVisibilityModelSelector } from '../columns/gridColumnsSelector';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { gridRowsMetaSelector } from '../rows/gridRowsMetaSelector';\nimport { getColumnsToExport } from './utils';\nimport { mergeStateWithPaginationModel } from '../pagination/useGridPagination';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GridPrintExportMenuItem } from '../../../components/toolbar/GridToolbarExport';\nimport { getTotalHeaderHeight } from '../columns/gridColumnsUtils';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction raf() {\n  return new Promise(function (resolve) {\n    requestAnimationFrame(function () {\n      resolve();\n    });\n  });\n}\nfunction buildPrintWindow(title) {\n  var iframeEl = document.createElement('iframe');\n  iframeEl.style.position = 'absolute';\n  iframeEl.style.width = '0px';\n  iframeEl.style.height = '0px';\n  iframeEl.title = title || document.title;\n  return iframeEl;\n}\n\n/**\n * @requires useGridColumns (state)\n * @requires useGridFilter (state)\n * @requires useGridSorting (state)\n * @requires useGridParamsApi (method)\n */\nexport var useGridPrintExport = function useGridPrintExport(apiRef, props) {\n  var logger = useGridLogger(apiRef, 'useGridPrintExport');\n  var doc = React.useRef(null);\n  var previousGridState = React.useRef(null);\n  var previousColumnVisibility = React.useRef({});\n  var previousRows = React.useRef([]);\n  React.useEffect(function () {\n    doc.current = ownerDocument(apiRef.current.rootElementRef.current);\n  }, [apiRef]);\n\n  // Returns a promise because updateColumns triggers state update and\n  // the new state needs to be in place before the grid can be sized correctly\n  var updateGridColumnsForPrint = React.useCallback(function (fields, allColumns, includeCheckboxes) {\n    return new Promise(function (resolve) {\n      var exportedColumnFields = getColumnsToExport({\n        apiRef: apiRef,\n        options: {\n          fields: fields,\n          allColumns: allColumns\n        }\n      }).map(function (column) {\n        return column.field;\n      });\n      var columns = gridColumnDefinitionsSelector(apiRef);\n      var newColumnVisibilityModel = {};\n      columns.forEach(function (column) {\n        newColumnVisibilityModel[column.field] = exportedColumnFields.includes(column.field);\n      });\n      if (includeCheckboxes) {\n        newColumnVisibilityModel[GRID_CHECKBOX_SELECTION_COL_DEF.field] = true;\n      }\n      apiRef.current.setColumnVisibilityModel(newColumnVisibilityModel);\n      resolve();\n    });\n  }, [apiRef]);\n  var updateGridRowsForPrint = React.useCallback(function (getRowsToExport) {\n    var rowsToExportIds = getRowsToExport({\n      apiRef: apiRef\n    });\n    var newRows = rowsToExportIds.map(function (id) {\n      return apiRef.current.getRow(id);\n    });\n    apiRef.current.setRows(newRows);\n  }, [apiRef]);\n  var handlePrintWindowLoad = React.useCallback(function (printWindow, options) {\n    var _querySelector, _querySelector2;\n    var normalizeOptions = _extends({\n      copyStyles: true,\n      hideToolbar: false,\n      hideFooter: false,\n      includeCheckboxes: false\n    }, options);\n    var printDoc = printWindow.contentDocument;\n    if (!printDoc) {\n      return;\n    }\n    var rowsMeta = gridRowsMetaSelector(apiRef.current.state);\n    var gridRootElement = apiRef.current.rootElementRef.current;\n    var gridClone = gridRootElement.cloneNode(true);\n\n    // Allow to overflow to not hide the border of the last row\n    var gridMain = gridClone.querySelector(\".\".concat(gridClasses.main));\n    gridMain.style.overflow = 'visible';\n\n    // See https://support.google.com/chrome/thread/191619088?hl=en&msgid=193009642\n    gridClone.style.contain = 'size';\n    var columnHeaders = gridClone.querySelector(\".\".concat(gridClasses.columnHeaders));\n    var columnHeadersInner = columnHeaders.querySelector(\".\".concat(gridClasses.columnHeadersInner));\n    columnHeadersInner.style.width = '100%';\n    var gridToolbarElementHeight = ((_querySelector = gridRootElement.querySelector(\".\".concat(gridClasses.toolbarContainer))) == null ? void 0 : _querySelector.offsetHeight) || 0;\n    var gridFooterElementHeight = ((_querySelector2 = gridRootElement.querySelector(\".\".concat(gridClasses.footerContainer))) == null ? void 0 : _querySelector2.offsetHeight) || 0;\n    if (normalizeOptions.hideToolbar) {\n      var _gridClone$querySelec;\n      (_gridClone$querySelec = gridClone.querySelector(\".\".concat(gridClasses.toolbarContainer))) == null || _gridClone$querySelec.remove();\n      gridToolbarElementHeight = 0;\n    }\n    if (normalizeOptions.hideFooter) {\n      var _gridClone$querySelec2;\n      (_gridClone$querySelec2 = gridClone.querySelector(\".\".concat(gridClasses.footerContainer))) == null || _gridClone$querySelec2.remove();\n      gridFooterElementHeight = 0;\n    }\n\n    // Expand container height to accommodate all rows\n    var computedTotalHeight = rowsMeta.currentPageTotalHeight + getTotalHeaderHeight(apiRef, props.columnHeaderHeight) + gridToolbarElementHeight + gridFooterElementHeight;\n    gridClone.style.height = \"\".concat(computedTotalHeight, \"px\");\n    // The height above does not include grid border width, so we need to exclude it\n    gridClone.style.boxSizing = 'content-box';\n\n    // the footer is always being placed at the bottom of the page as if all rows are exported\n    // so if getRowsToExport is being used to only export a subset of rows then we need to\n    // adjust the footer position to be correctly placed at the bottom of the grid\n    if (options != null && options.getRowsToExport) {\n      var gridFooterElement = gridClone.querySelector(\".\".concat(gridClasses.footerContainer));\n      gridFooterElement.style.position = 'absolute';\n      gridFooterElement.style.width = '100%';\n      gridFooterElement.style.top = \"\".concat(computedTotalHeight - gridFooterElementHeight, \"px\");\n    }\n\n    // printDoc.body.appendChild(gridClone); should be enough but a clone isolation bug in Safari\n    // prevents us to do it\n    var container = document.createElement('div');\n    container.appendChild(gridClone);\n    printDoc.body.innerHTML = container.innerHTML;\n    var defaultPageStyle = typeof normalizeOptions.pageStyle === 'function' ? normalizeOptions.pageStyle() : normalizeOptions.pageStyle;\n    if (typeof defaultPageStyle === 'string') {\n      // TODO custom styles should always win\n      var styleElement = printDoc.createElement('style');\n      styleElement.appendChild(printDoc.createTextNode(defaultPageStyle));\n      printDoc.head.appendChild(styleElement);\n    }\n    if (normalizeOptions.bodyClassName) {\n      var _printDoc$body$classL;\n      (_printDoc$body$classL = printDoc.body.classList).add.apply(_printDoc$body$classL, _toConsumableArray(normalizeOptions.bodyClassName.split(' ')));\n    }\n    var stylesheetLoadPromises = [];\n    if (normalizeOptions.copyStyles) {\n      var rootCandidate = gridRootElement.getRootNode();\n      var root = rootCandidate.constructor.name === 'ShadowRoot' ? rootCandidate : doc.current;\n      var headStyleElements = root.querySelectorAll(\"style, link[rel='stylesheet']\");\n      var _loop = function _loop() {\n        var node = headStyleElements[i];\n        if (node.tagName === 'STYLE') {\n          var newHeadStyleElements = printDoc.createElement(node.tagName);\n          var sheet = node.sheet;\n          if (sheet) {\n            var styleCSS = '';\n            // NOTE: for-of is not supported by IE\n            for (var j = 0; j < sheet.cssRules.length; j += 1) {\n              if (typeof sheet.cssRules[j].cssText === 'string') {\n                styleCSS += \"\".concat(sheet.cssRules[j].cssText, \"\\r\\n\");\n              }\n            }\n            newHeadStyleElements.appendChild(printDoc.createTextNode(styleCSS));\n            printDoc.head.appendChild(newHeadStyleElements);\n          }\n        } else if (node.getAttribute('href')) {\n          // If `href` tag is empty, avoid loading these links\n\n          var _newHeadStyleElements = printDoc.createElement(node.tagName);\n          for (var _j = 0; _j < node.attributes.length; _j += 1) {\n            var attr = node.attributes[_j];\n            if (attr) {\n              _newHeadStyleElements.setAttribute(attr.nodeName, attr.nodeValue || '');\n            }\n          }\n          stylesheetLoadPromises.push(new Promise(function (resolve) {\n            _newHeadStyleElements.addEventListener('load', function () {\n              return resolve();\n            });\n          }));\n          printDoc.head.appendChild(_newHeadStyleElements);\n        }\n      };\n      for (var i = 0; i < headStyleElements.length; i += 1) {\n        _loop();\n      }\n    }\n\n    // Trigger print\n    if (process.env.NODE_ENV !== 'test') {\n      // wait for remote stylesheets to load\n      Promise.all(stylesheetLoadPromises).then(function () {\n        printWindow.contentWindow.print();\n      });\n    }\n  }, [apiRef, doc, props.columnHeaderHeight]);\n  var handlePrintWindowAfterPrint = React.useCallback(function (printWindow) {\n    var _previousGridState$cu;\n    // Remove the print iframe\n    doc.current.body.removeChild(printWindow);\n\n    // Revert grid to previous state\n    apiRef.current.restoreState(previousGridState.current || {});\n    if (!((_previousGridState$cu = previousGridState.current) != null && (_previousGridState$cu = _previousGridState$cu.columns) != null && _previousGridState$cu.columnVisibilityModel)) {\n      // if the apiRef.current.exportState(); did not exported the column visibility, we update it\n      apiRef.current.setColumnVisibilityModel(previousColumnVisibility.current);\n    }\n    apiRef.current.unstable_setVirtualization(true);\n    apiRef.current.setRows(previousRows.current);\n\n    // Clear local state\n    previousGridState.current = null;\n    previousColumnVisibility.current = {};\n    previousRows.current = [];\n  }, [apiRef]);\n  var exportDataAsPrint = React.useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(options) {\n      var visibleRowCount, paginationModel, printWindow;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            logger.debug(\"Export data as Print\");\n            if (apiRef.current.rootElementRef.current) {\n              _context.next = 3;\n              break;\n            }\n            throw new Error('MUI: No grid root element available.');\n          case 3:\n            previousGridState.current = apiRef.current.exportState();\n            // It appends that the visibility model is not exported, especially if columnVisibility is not controlled\n            previousColumnVisibility.current = gridColumnVisibilityModelSelector(apiRef);\n            previousRows.current = apiRef.current.getSortedRows();\n            if (props.pagination) {\n              visibleRowCount = gridExpandedRowCountSelector(apiRef);\n              paginationModel = {\n                page: 0,\n                pageSize: visibleRowCount\n              };\n              apiRef.current.updateControlState('pagination',\n              // Using signature `DataGridPro` to allow more than 100 rows in the print export\n              mergeStateWithPaginationModel(visibleRowCount, 'DataGridPro', paginationModel));\n              apiRef.current.forceUpdate();\n            }\n            _context.next = 9;\n            return updateGridColumnsForPrint(options == null ? void 0 : options.fields, options == null ? void 0 : options.allColumns, options == null ? void 0 : options.includeCheckboxes);\n          case 9:\n            if (options != null && options.getRowsToExport) {\n              updateGridRowsForPrint(options.getRowsToExport);\n            }\n            apiRef.current.unstable_setVirtualization(false);\n            _context.next = 13;\n            return raf();\n          case 13:\n            // wait for the state changes to take action\n            printWindow = buildPrintWindow(options == null ? void 0 : options.fileName);\n            if (process.env.NODE_ENV === 'test') {\n              doc.current.body.appendChild(printWindow);\n              // In test env, run the all pipeline without waiting for loading\n              handlePrintWindowLoad(printWindow, options);\n              handlePrintWindowAfterPrint(printWindow);\n            } else {\n              printWindow.onload = function () {\n                handlePrintWindowLoad(printWindow, options);\n                var mediaQueryList = printWindow.contentWindow.matchMedia('print');\n                mediaQueryList.addEventListener('change', function (mql) {\n                  var isAfterPrint = mql.matches === false;\n                  if (isAfterPrint) {\n                    handlePrintWindowAfterPrint(printWindow);\n                  }\n                });\n              };\n              doc.current.body.appendChild(printWindow);\n            }\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [props, logger, apiRef, handlePrintWindowLoad, handlePrintWindowAfterPrint, updateGridColumnsForPrint, updateGridRowsForPrint]);\n  var printExportApi = {\n    exportDataAsPrint: exportDataAsPrint\n  };\n  useGridApiMethod(apiRef, printExportApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  var addExportMenuButtons = React.useCallback(function (initialValue, options) {\n    var _options$printOptions;\n    if ((_options$printOptions = options.printOptions) != null && _options$printOptions.disableToolbarButton) {\n      return initialValue;\n    }\n    return [].concat(_toConsumableArray(initialValue), [{\n      component: /*#__PURE__*/_jsx(GridPrintExportMenuItem, {\n        options: options.printOptions\n      }),\n      componentName: 'printExport'\n    }]);\n  }, []);\n  useGridRegisterPipeProcessor(apiRef, 'exportMenu', addExportMenuButtons);\n};","map":{"version":3,"names":["_extends","React","unstable_ownerDocument","ownerDocument","useGridLogger","gridExpandedRowCountSelector","gridColumnDefinitionsSelector","gridColumnVisibilityModelSelector","gridClasses","useGridApiMethod","gridRowsMetaSelector","getColumnsToExport","mergeStateWithPaginationModel","useGridRegisterPipeProcessor","GridPrintExportMenuItem","getTotalHeaderHeight","GRID_CHECKBOX_SELECTION_COL_DEF","jsx","_jsx","raf","Promise","resolve","requestAnimationFrame","buildPrintWindow","title","iframeEl","document","createElement","style","position","width","height","useGridPrintExport","apiRef","props","logger","doc","useRef","previousGridState","previousColumnVisibility","previousRows","useEffect","current","rootElementRef","updateGridColumnsForPrint","useCallback","fields","allColumns","includeCheckboxes","exportedColumnFields","options","map","column","field","columns","newColumnVisibilityModel","forEach","includes","setColumnVisibilityModel","updateGridRowsForPrint","getRowsToExport","rowsToExportIds","newRows","id","getRow","setRows","handlePrintWindowLoad","printWindow","_querySelector","_querySelector2","normalizeOptions","copyStyles","hideToolbar","hideFooter","printDoc","contentDocument","rowsMeta","state","gridRootElement","gridClone","cloneNode","gridMain","querySelector","concat","main","overflow","contain","columnHeaders","columnHeadersInner","gridToolbarElementHeight","toolbarContainer","offsetHeight","gridFooterElementHeight","footerContainer","_gridClone$querySelec","remove","_gridClone$querySelec2","computedTotalHeight","currentPageTotalHeight","columnHeaderHeight","boxSizing","gridFooterElement","top","container","appendChild","body","innerHTML","defaultPageStyle","pageStyle","styleElement","createTextNode","head","bodyClassName","_printDoc$body$classL","classList","add","apply","_toConsumableArray","split","stylesheetLoadPromises","rootCandidate","getRootNode","root","constructor","name","headStyleElements","querySelectorAll","_loop","node","i","tagName","newHeadStyleElements","sheet","styleCSS","j","cssRules","length","cssText","getAttribute","attributes","attr","setAttribute","nodeName","nodeValue","push","addEventListener","process","env","NODE_ENV","all","then","contentWindow","print","handlePrintWindowAfterPrint","_previousGridState$cu","removeChild","restoreState","columnVisibilityModel","unstable_setVirtualization","exportDataAsPrint","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","visibleRowCount","paginationModel","wrap","_callee$","_context","prev","next","debug","Error","exportState","getSortedRows","pagination","page","pageSize","updateControlState","forceUpdate","fileName","onload","mediaQueryList","matchMedia","mql","isAfterPrint","matches","stop","_x","arguments","printExportApi","addExportMenuButtons","initialValue","_options$printOptions","printOptions","disableToolbarButton","component","componentName"],"sources":["/home/mnck/MNCK/Programmes/Semestre5/DevAppN-T/appli_codes/Repos/Lab14/carfront/node_modules/@mui/x-data-grid/hooks/features/export/useGridPrintExport.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument } from '@mui/utils';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridExpandedRowCountSelector } from '../filter/gridFilterSelector';\nimport { gridColumnDefinitionsSelector, gridColumnVisibilityModelSelector } from '../columns/gridColumnsSelector';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { gridRowsMetaSelector } from '../rows/gridRowsMetaSelector';\nimport { getColumnsToExport } from './utils';\nimport { mergeStateWithPaginationModel } from '../pagination/useGridPagination';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GridPrintExportMenuItem } from '../../../components/toolbar/GridToolbarExport';\nimport { getTotalHeaderHeight } from '../columns/gridColumnsUtils';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction raf() {\n  return new Promise(resolve => {\n    requestAnimationFrame(() => {\n      resolve();\n    });\n  });\n}\nfunction buildPrintWindow(title) {\n  const iframeEl = document.createElement('iframe');\n  iframeEl.style.position = 'absolute';\n  iframeEl.style.width = '0px';\n  iframeEl.style.height = '0px';\n  iframeEl.title = title || document.title;\n  return iframeEl;\n}\n\n/**\n * @requires useGridColumns (state)\n * @requires useGridFilter (state)\n * @requires useGridSorting (state)\n * @requires useGridParamsApi (method)\n */\nexport const useGridPrintExport = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridPrintExport');\n  const doc = React.useRef(null);\n  const previousGridState = React.useRef(null);\n  const previousColumnVisibility = React.useRef({});\n  const previousRows = React.useRef([]);\n  React.useEffect(() => {\n    doc.current = ownerDocument(apiRef.current.rootElementRef.current);\n  }, [apiRef]);\n\n  // Returns a promise because updateColumns triggers state update and\n  // the new state needs to be in place before the grid can be sized correctly\n  const updateGridColumnsForPrint = React.useCallback((fields, allColumns, includeCheckboxes) => new Promise(resolve => {\n    const exportedColumnFields = getColumnsToExport({\n      apiRef,\n      options: {\n        fields,\n        allColumns\n      }\n    }).map(column => column.field);\n    const columns = gridColumnDefinitionsSelector(apiRef);\n    const newColumnVisibilityModel = {};\n    columns.forEach(column => {\n      newColumnVisibilityModel[column.field] = exportedColumnFields.includes(column.field);\n    });\n    if (includeCheckboxes) {\n      newColumnVisibilityModel[GRID_CHECKBOX_SELECTION_COL_DEF.field] = true;\n    }\n    apiRef.current.setColumnVisibilityModel(newColumnVisibilityModel);\n    resolve();\n  }), [apiRef]);\n  const updateGridRowsForPrint = React.useCallback(getRowsToExport => {\n    const rowsToExportIds = getRowsToExport({\n      apiRef\n    });\n    const newRows = rowsToExportIds.map(id => apiRef.current.getRow(id));\n    apiRef.current.setRows(newRows);\n  }, [apiRef]);\n  const handlePrintWindowLoad = React.useCallback((printWindow, options) => {\n    var _querySelector, _querySelector2;\n    const normalizeOptions = _extends({\n      copyStyles: true,\n      hideToolbar: false,\n      hideFooter: false,\n      includeCheckboxes: false\n    }, options);\n    const printDoc = printWindow.contentDocument;\n    if (!printDoc) {\n      return;\n    }\n    const rowsMeta = gridRowsMetaSelector(apiRef.current.state);\n    const gridRootElement = apiRef.current.rootElementRef.current;\n    const gridClone = gridRootElement.cloneNode(true);\n\n    // Allow to overflow to not hide the border of the last row\n    const gridMain = gridClone.querySelector(`.${gridClasses.main}`);\n    gridMain.style.overflow = 'visible';\n\n    // See https://support.google.com/chrome/thread/191619088?hl=en&msgid=193009642\n    gridClone.style.contain = 'size';\n    const columnHeaders = gridClone.querySelector(`.${gridClasses.columnHeaders}`);\n    const columnHeadersInner = columnHeaders.querySelector(`.${gridClasses.columnHeadersInner}`);\n    columnHeadersInner.style.width = '100%';\n    let gridToolbarElementHeight = ((_querySelector = gridRootElement.querySelector(`.${gridClasses.toolbarContainer}`)) == null ? void 0 : _querySelector.offsetHeight) || 0;\n    let gridFooterElementHeight = ((_querySelector2 = gridRootElement.querySelector(`.${gridClasses.footerContainer}`)) == null ? void 0 : _querySelector2.offsetHeight) || 0;\n    if (normalizeOptions.hideToolbar) {\n      var _gridClone$querySelec;\n      (_gridClone$querySelec = gridClone.querySelector(`.${gridClasses.toolbarContainer}`)) == null || _gridClone$querySelec.remove();\n      gridToolbarElementHeight = 0;\n    }\n    if (normalizeOptions.hideFooter) {\n      var _gridClone$querySelec2;\n      (_gridClone$querySelec2 = gridClone.querySelector(`.${gridClasses.footerContainer}`)) == null || _gridClone$querySelec2.remove();\n      gridFooterElementHeight = 0;\n    }\n\n    // Expand container height to accommodate all rows\n    const computedTotalHeight = rowsMeta.currentPageTotalHeight + getTotalHeaderHeight(apiRef, props.columnHeaderHeight) + gridToolbarElementHeight + gridFooterElementHeight;\n    gridClone.style.height = `${computedTotalHeight}px`;\n    // The height above does not include grid border width, so we need to exclude it\n    gridClone.style.boxSizing = 'content-box';\n\n    // the footer is always being placed at the bottom of the page as if all rows are exported\n    // so if getRowsToExport is being used to only export a subset of rows then we need to\n    // adjust the footer position to be correctly placed at the bottom of the grid\n    if (options != null && options.getRowsToExport) {\n      const gridFooterElement = gridClone.querySelector(`.${gridClasses.footerContainer}`);\n      gridFooterElement.style.position = 'absolute';\n      gridFooterElement.style.width = '100%';\n      gridFooterElement.style.top = `${computedTotalHeight - gridFooterElementHeight}px`;\n    }\n\n    // printDoc.body.appendChild(gridClone); should be enough but a clone isolation bug in Safari\n    // prevents us to do it\n    const container = document.createElement('div');\n    container.appendChild(gridClone);\n    printDoc.body.innerHTML = container.innerHTML;\n    const defaultPageStyle = typeof normalizeOptions.pageStyle === 'function' ? normalizeOptions.pageStyle() : normalizeOptions.pageStyle;\n    if (typeof defaultPageStyle === 'string') {\n      // TODO custom styles should always win\n      const styleElement = printDoc.createElement('style');\n      styleElement.appendChild(printDoc.createTextNode(defaultPageStyle));\n      printDoc.head.appendChild(styleElement);\n    }\n    if (normalizeOptions.bodyClassName) {\n      printDoc.body.classList.add(...normalizeOptions.bodyClassName.split(' '));\n    }\n    const stylesheetLoadPromises = [];\n    if (normalizeOptions.copyStyles) {\n      const rootCandidate = gridRootElement.getRootNode();\n      const root = rootCandidate.constructor.name === 'ShadowRoot' ? rootCandidate : doc.current;\n      const headStyleElements = root.querySelectorAll(\"style, link[rel='stylesheet']\");\n      for (let i = 0; i < headStyleElements.length; i += 1) {\n        const node = headStyleElements[i];\n        if (node.tagName === 'STYLE') {\n          const newHeadStyleElements = printDoc.createElement(node.tagName);\n          const sheet = node.sheet;\n          if (sheet) {\n            let styleCSS = '';\n            // NOTE: for-of is not supported by IE\n            for (let j = 0; j < sheet.cssRules.length; j += 1) {\n              if (typeof sheet.cssRules[j].cssText === 'string') {\n                styleCSS += `${sheet.cssRules[j].cssText}\\r\\n`;\n              }\n            }\n            newHeadStyleElements.appendChild(printDoc.createTextNode(styleCSS));\n            printDoc.head.appendChild(newHeadStyleElements);\n          }\n        } else if (node.getAttribute('href')) {\n          // If `href` tag is empty, avoid loading these links\n\n          const newHeadStyleElements = printDoc.createElement(node.tagName);\n          for (let j = 0; j < node.attributes.length; j += 1) {\n            const attr = node.attributes[j];\n            if (attr) {\n              newHeadStyleElements.setAttribute(attr.nodeName, attr.nodeValue || '');\n            }\n          }\n          stylesheetLoadPromises.push(new Promise(resolve => {\n            newHeadStyleElements.addEventListener('load', () => resolve());\n          }));\n          printDoc.head.appendChild(newHeadStyleElements);\n        }\n      }\n    }\n\n    // Trigger print\n    if (process.env.NODE_ENV !== 'test') {\n      // wait for remote stylesheets to load\n      Promise.all(stylesheetLoadPromises).then(() => {\n        printWindow.contentWindow.print();\n      });\n    }\n  }, [apiRef, doc, props.columnHeaderHeight]);\n  const handlePrintWindowAfterPrint = React.useCallback(printWindow => {\n    var _previousGridState$cu;\n    // Remove the print iframe\n    doc.current.body.removeChild(printWindow);\n\n    // Revert grid to previous state\n    apiRef.current.restoreState(previousGridState.current || {});\n    if (!((_previousGridState$cu = previousGridState.current) != null && (_previousGridState$cu = _previousGridState$cu.columns) != null && _previousGridState$cu.columnVisibilityModel)) {\n      // if the apiRef.current.exportState(); did not exported the column visibility, we update it\n      apiRef.current.setColumnVisibilityModel(previousColumnVisibility.current);\n    }\n    apiRef.current.unstable_setVirtualization(true);\n    apiRef.current.setRows(previousRows.current);\n\n    // Clear local state\n    previousGridState.current = null;\n    previousColumnVisibility.current = {};\n    previousRows.current = [];\n  }, [apiRef]);\n  const exportDataAsPrint = React.useCallback(async options => {\n    logger.debug(`Export data as Print`);\n    if (!apiRef.current.rootElementRef.current) {\n      throw new Error('MUI: No grid root element available.');\n    }\n    previousGridState.current = apiRef.current.exportState();\n    // It appends that the visibility model is not exported, especially if columnVisibility is not controlled\n    previousColumnVisibility.current = gridColumnVisibilityModelSelector(apiRef);\n    previousRows.current = apiRef.current.getSortedRows();\n    if (props.pagination) {\n      const visibleRowCount = gridExpandedRowCountSelector(apiRef);\n      const paginationModel = {\n        page: 0,\n        pageSize: visibleRowCount\n      };\n      apiRef.current.updateControlState('pagination',\n      // Using signature `DataGridPro` to allow more than 100 rows in the print export\n      mergeStateWithPaginationModel(visibleRowCount, 'DataGridPro', paginationModel));\n      apiRef.current.forceUpdate();\n    }\n    await updateGridColumnsForPrint(options == null ? void 0 : options.fields, options == null ? void 0 : options.allColumns, options == null ? void 0 : options.includeCheckboxes);\n    if (options != null && options.getRowsToExport) {\n      updateGridRowsForPrint(options.getRowsToExport);\n    }\n    apiRef.current.unstable_setVirtualization(false);\n    await raf(); // wait for the state changes to take action\n    const printWindow = buildPrintWindow(options == null ? void 0 : options.fileName);\n    if (process.env.NODE_ENV === 'test') {\n      doc.current.body.appendChild(printWindow);\n      // In test env, run the all pipeline without waiting for loading\n      handlePrintWindowLoad(printWindow, options);\n      handlePrintWindowAfterPrint(printWindow);\n    } else {\n      printWindow.onload = () => {\n        handlePrintWindowLoad(printWindow, options);\n        const mediaQueryList = printWindow.contentWindow.matchMedia('print');\n        mediaQueryList.addEventListener('change', mql => {\n          const isAfterPrint = mql.matches === false;\n          if (isAfterPrint) {\n            handlePrintWindowAfterPrint(printWindow);\n          }\n        });\n      };\n      doc.current.body.appendChild(printWindow);\n    }\n  }, [props, logger, apiRef, handlePrintWindowLoad, handlePrintWindowAfterPrint, updateGridColumnsForPrint, updateGridRowsForPrint]);\n  const printExportApi = {\n    exportDataAsPrint\n  };\n  useGridApiMethod(apiRef, printExportApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  const addExportMenuButtons = React.useCallback((initialValue, options) => {\n    var _options$printOptions;\n    if ((_options$printOptions = options.printOptions) != null && _options$printOptions.disableToolbarButton) {\n      return initialValue;\n    }\n    return [...initialValue, {\n      component: /*#__PURE__*/_jsx(GridPrintExportMenuItem, {\n        options: options.printOptions\n      }),\n      componentName: 'printExport'\n    }];\n  }, []);\n  useGridRegisterPipeProcessor(apiRef, 'exportMenu', addExportMenuButtons);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}